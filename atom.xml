<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>听雨煎茶</title>
  
  
  <link href="https://staray.github.io/atom.xml" rel="self"/>
  
  <link href="https://staray.github.io/"/>
  <updated>2023-05-19T01:44:35.920Z</updated>
  <id>https://staray.github.io/</id>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>万花尺-内轮旋线</title>
    <link href="https://staray.github.io/2023/05/19/spirograph/"/>
    <id>https://staray.github.io/2023/05/19/spirograph/</id>
    <published>2023-05-19T01:16:26.000Z</published>
    <updated>2023-05-19T01:44:35.920Z</updated>
    
    <content type="html"><![CDATA[<p>在20 世纪 70 年代，一款有趣的(intriguing)益智玩具(educational toy)出现在市场上并迅速走红：呼吸运动记录计(spirograph)。它由一组大小不一的塑料制成的小轮子组成，轮子的轮辋(wǎng，旧式车轮周围的框子)上有齿，两个大环的内外轮辋上都有齿(图 39)。 小孔在距中心不同距离处穿孔(perforated)在每个轮子上。您将其中一个环钉在一张纸上，将一个轮子与其接触以便齿啮(niè)合，然后将一支笔插入其中一个孔中。当你绕着圆环移动轮子时，纸上会画出一条曲线</p><p>我们小时候把这种玩具称之为：万花尺。</p><p>这条曲线有个名词为：内旋曲线。<br>下面就是一个能绘制内轮旋线的示例，右侧可以控制大圆、小圆、小圆上特殊点以及旋转圈数的数值，点击绘制按钮，即可绘制漂亮的旋线。</p><p><img src="https://pic.staray.top/spirograph/da5911c8543d488cbe9ab6304f4a1b40.png" alt="image"></p><div class="container">    <div class="canvas-wrapper">        <canvas id="myCanvas" class="canvas" width="1000" height="1000"></canvas>    </div>    <div class="sidebar">        <div class="sidebar-item">            <div>大圆半径(100 - 500)</div>            <input id="bigR" type="number" min="100" max="500" value="500">            <input id="bigSlider" type="range" min="100" max="500" value="500">        </div>        <div class="sidebar-item">            <div>小圆半径(100 - 450)</div>            <input id="smallR" type="number" min="100" max="450" value="305">            <input id="smallSlider" type="range" min="100" max="450" value="305">        </div>        <div class="sidebar-item">            <div>特殊点到小圆距离(0 - 450)</div>            <input id="d" type="number" min="0" max="450" value="167">            <input id="dSlider" type="range" min="0" max="450" value="167">        </div>        <div class="sidebar-item">            <div>旋转圈数(1 - 300)</div>            <input id="circle" type="number" min="1" max="300" value="300">            <input id="circleSlider" type="range" min="1" max="300" value="300">        </div>        <button id="draw-btn" style="height: 30px" onclick="onDrawBtnClick()">绘制</button>    </div></div> <style>    html, body {        height: 100%;        margin: 0;        padding: 0;    }    .container {        display: flex;        height: 100%;    }    .canvas-wrapper {        flex: 2;        display: flex;        justify-content: center;        align-items: center;        background-color: lightgray;    }    .canvas {        width: 1000px;        height: 1000px;        background-color: white;    }    .sidebar {        flex: 1;        background-color: gray;        padding: 20px;        display: flex;        flex-direction: column;    }    .sidebar-item {        margin-bottom: 20px;        padding: 20px;        background-color: white;        display: flex;    }    .sidebar-item input {        margin-left: 20px;        height: 26px;    }</style><script>    const bigRInput = document.getElementById('bigR');    const bigRSlider = document.getElementById('bigSlider');    bigRInput.addEventListener('input', () => {        bigRSlider.value = bigRInput.value;    });    bigRSlider.addEventListener('input', () => {        bigRInput.value = bigRSlider.value;    });    const smallRInput = document.getElementById('smallR');    const smallSlider = document.getElementById('smallSlider');    smallRInput.addEventListener('input', () => {        smallSlider.value = smallRInput.value;    });    smallSlider.addEventListener('input', () => {        smallRInput.value = smallSlider.value;    });    const dInput = document.getElementById('d');    const dSlider = document.getElementById('dSlider');    dInput.addEventListener('input', () => {        dSlider.value = dInput.value;    });    dSlider.addEventListener('input', () => {        dInput.value = dSlider.value;    });    const circleInput = document.getElementById('circle');    const circleSlider = document.getElementById('circleSlider');    circleInput.addEventListener('input', () => {        circleSlider.value = circleInput.value;    });    circleSlider.addEventListener('input', () => {        circleInput.value = circleSlider.value;    });    const drawBtn = document.getElementById("draw-btn");</script><script>    var isDrawing = false;    var bigR = 500;    var smallR = 305;    var d = 167;    var circle = 380;    function onDrawBtnClick() {        if(!isDrawing) {            var bigRValue = parseInt(bigRInput.value);            var smallRValue  = parseInt(smallRInput.value);            var dValue = parseInt(dInput.value);            var circleValue = parseInt(circleInput.value);            console.log("bigR="+bigRValue+"; smallR="+smallRValue+"; d="+dValue+": circle="+circleValue);            if(smallRValue > bigRValue) {                alert("小圆半径不能大于大圆半径");                return;            }            if(dValue > smallRValue) {                alert("特殊点到小圆圆心距离不能大于小圆半径");                return;            }            bigR = bigRValue;            smallR = smallRValue;            d = dValue;            circle = circleValue;            console.log("bigR="+bigR+"; smallR="+smallR+"; d="+d+": circle="+circle);            isDrawing = true;            startDraw();            drawBtn.textContent = "停止";        } else  {            isDrawing = false;            drawBtn.textContent = "绘制";        }    }    function startDraw() {        var perAngle = 80;        var lastPoint;        var lineColor =["red", "orange", "yellow", "green", "blue", "purple"];        var currentColor = 0;        function neixuan(angle) {            var mX = (bigR - smallR)*Math.cos(angle * Math.PI / 180) + d * Math.cos((bigR - smallR) / smallR * angle * Math.PI / 180);            var mY = (bigR - smallR)*Math.sin(angle * Math.PI / 180) - d * Math.sin((bigR - smallR) / smallR * angle * Math.PI / 180);            // 大圆圆心坐标(bigR, bigR)，转换坐标系原点为左上角，并且y朝下            var x0 = bigR + mX;            var y0 = bigR - mY;            return {x: x0, y: y0};        }        var canvas = document.getElementById("myCanvas");        var ctx = canvas.getContext("2d");        ctx.strokeStyle = "red";        ctx.lineWidth = 1;        var angle = 0        var max  = 360 * circle        ctx.clearRect(0, 0, canvas.width, canvas.height)        ctx.beginPath()        var start = neixuan(angle);        lastPoint = start;        ctx.moveTo(start.x, start.y)        function drawFrame() {            if(!isDrawing) {                return;            }            // 绘制过多的点会导致变慢，每绘制720度，就重新生成新的ctx来解决这个问题            if(angle != 0 && angle % 720 == 0) {                ctx = canvas.getContext("2d")                ctx.strokeStyle = lineColor[currentColor % lineColor.length]                ctx.lineWidth = 1                ctx.beginPath()                currentColor++;            }            var index = 0;            while(index < perAngle) {                ctx.moveTo(lastPoint.x, lastPoint.y)                var current = neixuan(angle);                ctx.lineTo(current.x, current.y);                ctx.stroke();                angle++;                index++;                lastPoint = current;            }            if(angle < max) {                requestAnimationFrame(drawFrame)            } else {                isDrawing = false;                drawBtn.textContent = "绘制";            }        }        drawFrame();    }    // startDraw();</script>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在20 世纪 70 年代，一款有趣的(intriguing)益智玩具(educational toy)出现在市场上并迅速走红：呼吸运动记录计(spirograph)。它由一组大小不一的塑料制成的小轮子组成，轮子的轮辋(wǎng，旧式车轮周围的框子)上有齿，两个大环的内外轮辋</summary>
      
    
    
    
    <category term="有趣" scheme="https://staray.github.io/categories/%E6%9C%89%E8%B6%A3/"/>
    
    
    <category term="内轮旋线" scheme="https://staray.github.io/tags/%E5%86%85%E8%BD%AE%E6%97%8B%E7%BA%BF/"/>
    
    <category term="万花尺" scheme="https://staray.github.io/tags/%E4%B8%87%E8%8A%B1%E5%B0%BA/"/>
    
  </entry>
  
  <entry>
    <title>七牛图床使用教程阿里个人域名配置</title>
    <link href="https://staray.github.io/2023/04/26/qiniu/"/>
    <id>https://staray.github.io/2023/04/26/qiniu/</id>
    <published>2023-04-26T08:04:37.000Z</published>
    <updated>2023-04-26T08:28:35.679Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本教程是使用七牛作为图床，并搭配个人域名来进行外链生成，还包含免费SSL个人证书申请和配置过程。</p><p>如果没有个人域名，就不需要再继续阅读了，因为七牛图床如果没有个人域名，只能使用一个月的临时外链域名。</p><p>个人域名申请和备案，请移步<a href="https://beian.aliyun.com/">阿里备案</a>，进行操作。</p><p>准备：</p><ul><li>七牛账户</li><li>阿里个人已备案域名</li></ul><h1 id="一、-七牛空间创建"><a href="#一、-七牛空间创建" class="headerlink" title="一、 七牛空间创建"></a>一、 七牛空间创建</h1><p>进入七牛对象存储-空间管理页面<a href="https://portal.qiniu.com/kodo/bucket">https://portal.qiniu.com/kodo/bucket</a>。</p><p>点击<code>新建空间</code>，输入空间名称，选择一个存储区域，<strong>访问控制选择公开</strong>，然后确定。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426140021.png" alt="image"></p><p>创建成功后，就会看到提示，临时域名只有一个月的使用时间。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426140101.png" alt="image"></p><p>点击刚申请的空间，进入空间概览页面，进入文件管理页面，就能看到外链临时域名。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426141823.png" alt="image"></p><p>回到空间概览的标签页，点击<code>自定义域名</code>按钮，进入添加域名的页面</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426141937.png" alt="image"></p><p>使用自己已经申请的阿里云域名，想一个二级域名，随便输入一个，比如我输入这个<code>staray-pic.staray.top</code>。我的个人域名是<code>staray.top</code>，二级域名就随便想一个，没有重复的即可，后面我们需要去阿里云控制台来新增这个二级域名。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426143924.png" alt="image"></p><blockquote><p>注意，我们这个时候选择了通信协议是<code>HTTP</code>，因为我们现在还没有证书，需要一会去阿里云控制台来申请证书，然后再回来修改这个地方，最后点击下方的创建按钮。</p></blockquote><blockquote><p>如果不配置SSL证书，在许多浏览器中都无法正常的访问图片</p></blockquote><p>接着会进入创建完成页面，这里，有个很重要的值CNAME，这个值要记录下来，需要去阿里云域名解析里面配置。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426145210.png" alt="image"></p><h1 id="二、-阿里云个人域名配置和证书申请"><a href="#二、-阿里云个人域名配置和证书申请" class="headerlink" title="二、 阿里云个人域名配置和证书申请"></a>二、 阿里云个人域名配置和证书申请</h1><h2 id="1-1-域名管理"><a href="#1-1-域名管理" class="headerlink" title="1.1 域名管理"></a>1.1 域名管理</h2><p>进入阿里云控制台： <a href="https://home.console.aliyun.com/home/dashboard/ProductAndService">https://home.console.aliyun.com/home/dashboard/ProductAndService</a>，通过左上角的菜单按钮，选择<code>域名</code>，进入域名管理页面</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426142426.png" alt="image"></p><p>从左侧列表选择<code>域名列表</code>，可以查看到自己的个人域名，然后，点击域名右侧的<code>解析</code>按钮。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426142758.png" alt="image"></p><p>进入了域名解析页面，在解析设置页面，点击<code>添加记录</code>按钮。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426144909.png" alt="image"></p><p>在添加记录页面，有3个地方需要更改：</p><ul><li>记录类型，选择为CNAME</li><li>主机记录更改为在七牛云填写的二级域名</li><li>记录值就是刚才在七牛云创建完成的CNAME值</li></ul><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426145746.png" alt="image"></p><p>完成后，点击确认按钮。</p><p>然后就能在列表中看到刚刚设置好的二级域名。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426150058.png" alt="image"></p><h2 id="1-2-证书配置"><a href="#1-2-证书配置" class="headerlink" title="1.2 证书配置"></a>1.2 证书配置</h2><p>回到阿里云控制台，通过左上角菜单，在搜索中输入SSL，查询到SSL证书（应用安全），点击进入。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426150325.png" alt="image"></p><p>进入后，点击左侧的SSL证书菜单，选择免费证书，然后点击立即购买。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426150643.png" alt="image"></p><p>根据个人需求，选择购买证书的数量，然后点击立即购买（这个是免费的）。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426150819.png" alt="image"></p><p>购买完成后，回到免费证书页面，点击创建证书按钮，列表中就会出现一个代申请的证书，点击右侧的证书申请按钮。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426151020.png" alt="image"></p><p>在证书申请页面，填写刚刚创建的二级域名<code>staray-pic.staray.top</code>，然后点击提交审核按钮。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426151229.png" alt="image"></p><p>然后等待CA发证，这个时间很快，一般几分钟就稿定。</p><p>发证后，刷新页面，就能看到列表的证书已经下发完成，接着我们需要把证书上传到七牛，点击证书右侧的下载按钮。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426151737.png" alt="image"></p><p>在证书下载页面，选择其他一项，点击下载。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426151926.png" alt="image"></p><p>证书下载完成后，是个zip压缩包，打开压缩包，里面包含了两个文件，一个pem和一个key文件，这些就是证书的公私钥对和信息文件。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426152122.png" alt="image"></p><p>解压出来，用<strong>文本编辑器软件比如记事本</strong>打开这两个文件，下面进入七牛去配置证书。</p><h1 id="七牛证书配置"><a href="#七牛证书配置" class="headerlink" title="七牛证书配置"></a>七牛证书配置</h1><p>回到七牛域名管理页面 <a href="https://portal.qiniu.com/cdn/domain">https://portal.qiniu.com/cdn/domain</a></p><p>在域名列表里面找到二级域名，点击右侧的配置按钮。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426152553.png" alt="image"></p><p>下拉页面，找到HTTPS配置部分，点击右侧的修改配置按钮。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426152727.png" alt="image"></p><p>在HTTPS配置页面，先点击开启按钮，然后输入证书备注名（随便想一个)，然后，分别把刚刚申请的证书的pem内容和key内容分别粘贴到下面的两个框中。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426152920.png" alt="image"></p><p>然后点击确定上传。</p><blockquote><p>注意，复制证书的时候，不要把最后一个空行复制上，只复制到内容的最后一个字符，如果复制了空行，上传时，七牛会提示证书格式问题，七牛会自动修复，这时选择七牛的那个版本，再上传即可。</p></blockquote><p>上传完成后，点击右下角确定按钮。</p><p>等待七牛配置，这个过程也很快，几分钟即可。</p><p>升级成功！</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426153750.png" alt="image"></p><h1 id="图床测试"><a href="#图床测试" class="headerlink" title="图床测试"></a>图床测试</h1><p>回到空间管理 <a href="https://portal.qiniu.com/kodo/bucket">https://portal.qiniu.com/kodo/bucket</a>，进入第一步建立好的空间，然后选择文件管理，选择上传文件，提交一张本地照片。</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426154119.png" alt="image"></p><p>上传完成后，刷新一下，能在列表中看到这个图片，选择更多-复制外链</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426154206.png" alt="image"></p><p>直接在浏览器中打开，就能看到图片了，并且SSL链接也是正常的</p><p><img src="https://pic.staray.top/qiniu/QQ%E6%88%AA%E5%9B%BE20230426154446.png" alt="image"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;本教程是使用七牛作为图床，并搭配个人域名来进行外链生成，还包含免费SSL个人证书申请和配置过程。&lt;/p&gt;
&lt;p&gt;如果没有个人域名，就不需要再</summary>
      
    
    
    
    
    <category term="七牛" scheme="https://staray.github.io/tags/%E4%B8%83%E7%89%9B/"/>
    
    <category term="图床" scheme="https://staray.github.io/tags/%E5%9B%BE%E5%BA%8A/"/>
    
    <category term="个人域名" scheme="https://staray.github.io/tags/%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D/"/>
    
    <category term="阿里云" scheme="https://staray.github.io/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>Qt Creator 编译窗口中文乱码</title>
    <link href="https://staray.github.io/2023/04/26/Qt-Creator-encoding-format/"/>
    <id>https://staray.github.io/2023/04/26/Qt-Creator-encoding-format/</id>
    <published>2023-04-26T02:12:03.000Z</published>
    <updated>2023-04-26T02:22:49.972Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>主要解决的是编译输出窗口、应用输出窗口的中文乱码问题，我使用的系统是英文系统，安装了中文语言包，因为系统自身属性，导致很多软件都无法正常显示中文，目标是：改成中文系统，并且让Qt所有显示中文的地方都能正常显示，不乱码。</p><h1 id="一、-系统设置"><a href="#一、-系统设置" class="headerlink" title="一、 系统设置"></a>一、 系统设置</h1><blockquote><p>系统：Windows10</p></blockquote><p><strong>在进行系统设置更改时，会提示需要重启，不需要每设置一次就重启一次，把全部设置都设置完成，再重启一次即可。</strong></p><h2 id="1-1-设置"><a href="#1-1-设置" class="headerlink" title="1.1 设置"></a>1.1 设置</h2><p>打开<code>开始-设置-时间和语言-区域</code>在<code>国家和地区</code>里面选择<code>中国</code>，<code>区域格式</code>选择<code>中文(简体，中国)</code></p><p><img src="https://pic.staray.top/Qt-zh-code-style/QQ%E6%88%AA%E5%9B%BE20230426092502.png" alt="image"></p><h2 id="1-2-控制面板"><a href="#1-2-控制面板" class="headerlink" title="1.2 控制面板"></a>1.2 控制面板</h2><p>打开<code>控制面板-时钟和区域-区域</code>，在弹出的区域对话框中，格式修改为<code>中文(简体，中国)</code></p><p><img src="https://pic.staray.top/Qt-zh-code-style/QQ%E6%88%AA%E5%9B%BE20230426092811.png" alt="image"></p><p>接着切换到<code>管理</code>标签页，在<code>非Unicode程序的语言</code>区域点击<code>更改系统区域设置</code>按钮</p><p><img src="https://pic.staray.top/Qt-zh-code-style/QQ%E6%88%AA%E5%9B%BE20230426093229.png" alt="image"></p><blockquote><p>注：在此页上面的欢迎屏幕和新用户账户的复制设置按钮，可以更改登录页面显示的语言。</p></blockquote><p>在弹出的<code>区域设置</code>对话框中，更改<code>当前系统区域设置</code>为<code>中文(简体，中国)</code></p><p><img src="https://pic.staray.top/Qt-zh-code-style/QQ%E6%88%AA%E5%9B%BE20230426093240.png" alt="image"></p><h2 id="1-3-注册表"><a href="#1-3-注册表" class="headerlink" title="1.3 注册表"></a>1.3 注册表</h2><p>使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Win+R</span><br></pre></td></tr></table></figure><p>打开运行窗口，输入<code>regedit</code>，打开注册表，按照如下路径打开：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Nls\Language</span><br></pre></td></tr></table></figure><p><img src="https://pic.staray.top/Qt-zh-code-style/QQ%E6%88%AA%E5%9B%BE20230426093535.png" alt="image"></p><p>将<code>Default</code>和<code>InstallLanguage</code>的值都修改为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0804</span><br></pre></td></tr></table></figure><blockquote><p>注：0409 值代表英文</p></blockquote><hr><p>至此，系统设置完成，</p><p><strong>重启电脑!</strong></p><p><strong>重启电脑!</strong></p><p><strong>重启电脑!</strong></p><p>重要的事情说三遍，一定要重启电脑。</p><h1 id="二、-QT-Creator-设置"><a href="#二、-QT-Creator-设置" class="headerlink" title="二、 QT Creator 设置"></a>二、 QT Creator 设置</h1><h2 id="2-1-文本编辑器"><a href="#2-1-文本编辑器" class="headerlink" title="2.1 文本编辑器"></a>2.1 文本编辑器</h2><p>低版本的Qt Creator打开：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">工具-选项</span><br></pre></td></tr></table></figure><p>高版本的打开：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">编辑-Preferences</span><br></pre></td></tr></table></figure><p>弹出的选项对话框，选择<code>文本编辑器</code>，</p><p><strong>选择一个支持中文的语言</strong></p><p>如果没有安装中文字体包，那么下载并安装一个支持中文的字体，重启Qt Creator再次选择。</p><p><img src="https://pic.staray.top/Qt-zh-code-style/QQ%E6%88%AA%E5%9B%BE20230426094718.png" alt="image"></p><p>这个设置完成后，可以先尝试编译一个小程序，观察中文是否显示正常，包括<code>编译输出</code>窗口和<code>应用输出</code>窗口的所有中文，是否显示正常，如果不可以，继续向下看。</p><h2 id="2-2-更改jom和utf-8输出"><a href="#2-2-更改jom和utf-8输出" class="headerlink" title="2.2 更改jom和utf-8输出"></a>2.2 更改jom和utf-8输出</h2><p>在这篇文章<a href="https://blog.csdn.net/fxfeixue/article/details/108790539">https://blog.csdn.net/fxfeixue/article/details/108790539</a>中，说需要以下两个配置需要勾选其中一个，但是我的情况测试是必须两个都勾选我这窗口才能显示正常，所以，根据自身的实际情况，全都试下，总共就4中情况：</p><ul><li>都勾选</li><li>都不勾选</li><li>只勾选一个</li></ul><p>在<code>构建和运行</code>页面中有个<code>使用jom代替nmake</code></p><p><img src="https://pic.staray.top/Qt-zh-code-style/QQ%E6%88%AA%E5%9B%BE20230426095537.png" alt="image"></p><p>在<code>Kits</code>页面，选中当前使用的编译环境，在下方有个<code>Force UTF-8 MSVC compiler output</code></p><p><img src="https://pic.staray.top/Qt-zh-code-style/QQ%E6%88%AA%E5%9B%BE20230426095558.png" alt="image"></p><p>在把前面的情况都试验以下，看看哪个能具体生效，每次更改，最好都重新启动一次Qt Creator，并且把编译输出的文件夹整个删掉，重新构建。</p><hr><center><font color="#00BFFF">宠辱不惊，看庭前花开花落；去留无意，望天空云卷云舒</font></center>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;主要解决的是编译输出窗口、应用输出窗口的中文乱码问题，我使用的系统是英文系统，安装了中文语言包，因为系统自身属性，导致很多软件都无法正常显示</summary>
      
    
    
    
    <category term="QT" scheme="https://staray.github.io/categories/QT/"/>
    
    
    <category term="Qt Creator" scheme="https://staray.github.io/tags/Qt-Creator/"/>
    
    <category term="Encoding" scheme="https://staray.github.io/tags/Encoding/"/>
    
    <category term="中文乱码" scheme="https://staray.github.io/tags/%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/"/>
    
    <category term="Win10" scheme="https://staray.github.io/tags/Win10/"/>
    
  </entry>
  
  <entry>
    <title>Github API</title>
    <link href="https://staray.github.io/2023/04/19/Github-API/"/>
    <id>https://staray.github.io/2023/04/19/Github-API/</id>
    <published>2023-04-19T01:25:31.000Z</published>
    <updated>2023-04-19T07:17:58.971Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在使用Github作为远端仓库的时候，Github给我们提供了一套API接口，可以做非常多有趣的事，今天尝试使用其中的API来操作仓库文件，达到一个免费“数据库”的作用。</p><p>具体描述：</p><ol><li>创建Github仓库，并传入一个文件作为“数据库”。</li><li>创建Token，用于访问和操作“数据库”</li><li>在安卓端，使用该Token，对“数据库”进行读写操作。</li></ol><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><blockquote><p>在开始之前，请先确保已经申请Github账号和配置好本地Git环境，并具备基本的Git操作知识。如果还未接触过Git请先尝试学习一下简单教程。</p></blockquote><h2 id="一、-创建仓库"><a href="#一、-创建仓库" class="headerlink" title="一、 创建仓库"></a>一、 创建仓库</h2><p>在Github页面创建一个公开仓库，起个名字比如：<code>APITest</code>:</p><p><img src="https://pic.staray.top/Github-API/QQ%E6%88%AA%E5%9B%BE20230419093847.png" alt="image"></p><p>本地创建一个新文件夹，创建两个文件<code>data.json</code>和<code>README.md</code>。<br>其中<code>data.json</code>就作为“数据库”文件使用，编辑此文件随便写点什么：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;key1&quot;: &quot;value1&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后，在本地建立仓库，并push到Github远端仓库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git add . --all</span><br><span class="line">git commit -m &quot;init&quot;</span><br><span class="line">git remote add origin git@github.com:Staray/APITest.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p>至此仓库准备完毕</p><h2 id="二、-验证接口"><a href="#二、-验证接口" class="headerlink" title="二、 验证接口"></a>二、 验证接口</h2><p>Github给我们提供了访问仓库文件的接口，测试下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.github.com/repos/Staray/APITest/contents/data.json</span><br></pre></td></tr></table></figure><p>返回结果：</p><p><img src="https://pic.staray.top/Github-API/api-data-json.png" alt="获取文件"></p><p>分析下这个接口：<br>前面的<code>https://api.github.com/repos/</code>是固定的，接着<code>Staray</code>是我的Github账户名，<code>APITest</code>是刚刚创建的仓库名称，<code>contents</code>是固定格式，<code>data.json</code>是刚刚创建的文件名称，所以通用的格式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.github.com/repos/[用户名]/[仓库名]/contents/[文件名]</span><br></pre></td></tr></table></figure><blockquote><p>注意，这个地址一定要注意大小写！</p></blockquote><p>这个json结构数据，包含了这个文件的一些关键性信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;data.json&quot;,</span><br><span class="line">  &quot;path&quot;: &quot;data.json&quot;,</span><br><span class="line">  &quot;sha&quot;: &quot;1cdefd0d8236a42053cbc83945180258d9cdaded&quot;,</span><br><span class="line">  &quot;size&quot;: 22,</span><br><span class="line">  &quot;url&quot;: &quot;https://api.github.com/repos/Staray/APITest/contents/data.json?ref=master&quot;,</span><br><span class="line">  &quot;html_url&quot;: &quot;https://github.com/Staray/APITest/blob/master/data.json&quot;,</span><br><span class="line">  &quot;git_url&quot;: &quot;https://api.github.com/repos/Staray/APITest/git/blobs/1cdefd0d8236a42053cbc83945180258d9cdaded&quot;,</span><br><span class="line">  &quot;download_url&quot;: &quot;https://raw.githubusercontent.com/Staray/APITest/master/data.json&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;file&quot;,</span><br><span class="line">  &quot;content&quot;: &quot;ewogICJrZXkxIjogInZhbHVlMSIKfQ==\n&quot;,</span><br><span class="line">  &quot;encoding&quot;: &quot;base64&quot;,</span><br><span class="line">  &quot;_links&quot;: &#123;</span><br><span class="line">    &quot;self&quot;: &quot;https://api.github.com/repos/Staray/APITest/contents/data.json?ref=master&quot;,</span><br><span class="line">    &quot;git&quot;: &quot;https://api.github.com/repos/Staray/APITest/git/blobs/1cdefd0d8236a42053cbc83945180258d9cdaded&quot;,</span><br><span class="line">    &quot;html&quot;: &quot;https://github.com/Staray/APITest/blob/master/data.json&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要注意的就是这个key：<code>sha</code>，每个仓库文件，都有对应的哈希值，如果修改该文件，哈希值就会变化，这个值是后面我们更新文件的唯一标识。<br>第二个需要注意的就是<code>content</code>，这个值记录的是文件内容的<code>Base64</code>编码结果，你可以直接通过<code>Base64解码</code>来获取到文件的内容。<br>第三个<code>download_url</code>，尝试访问这个地址，你就会直接拿到文件内容，如下所示：<br><img src="https://pic.staray.top/Github-API/raw-data-json.png" alt="raw-data-json"></p><p>其他更多接口使用查看：<br><a href="https://www.jianshu.com/p/a6779929fad2">https://www.jianshu.com/p/a6779929fad2</a></p><h2 id="三、-TOKEN申请"><a href="#三、-TOKEN申请" class="headerlink" title="三、 TOKEN申请"></a>三、 TOKEN申请</h2><p>上面的文档中给出了多种认证方式：</p><blockquote><p>认证方法一：Basic authentication<br>认证方法二：OAuth2 token<br>认证方法三：OAuth2 key/secret</p></blockquote><p>根据我们要实现的功能，最合适的是TOKEN验证。</p><p>在Github页面，打开Setting页面：</p><p><img src="https://pic.staray.top/Github-API/setting-btn.png" alt="setting"></p><p>找到<code> Developer settings</code>选项卡点击打开，进入<code>Token页面</code></p><p><img src="https://pic.staray.top/Github-API/token-page.png" alt="Token Page"></p><p>点击<code>Generate new token</code>，在下拉框中选择<code>Generate new token(classic)</code>，创建一个新的Token。</p><p>在创建页面，输入Note，设置期限，可以设置无过期，然后根据权限勾选token能操作的接口，这里我们需要操作仓库，至少要把repo勾选上：<br><img src="https://pic.staray.top/Github-API/gen-token.png" alt="Gen token"></p><p>然后，点击下方的<code>Generate token</code>按钮。</p><p>就能看到生成的Token页面，注意，这个页面只有在这时显示一次，以后就再也看不到这个Token明文了，所以需要这时保存下来，然后一直使用，假如没有保存，重新执行上面的生成token步骤进行替换即可。</p><p><img src="https://pic.staray.top/Github-API/token-content.png" alt="Token Content"></p><h2 id="四、-修改文件测试"><a href="#四、-修改文件测试" class="headerlink" title="四、 修改文件测试"></a>四、 修改文件测试</h2><p>下面介绍在安卓项目中修改仓库文件的实际测试，可以使用任何其他网络访问方式进行替换，比如在windows上使用Curl工具，PostMan工具等，原理都是一样。</p><p>比如使用Ok-go库进行网络访问，设置Header：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HttpHeaders headers = new HttpHeaders();</span><br><span class="line">headers.put(&quot;Authorization&quot;, &quot;token ghp_xxxxxxxxxxxxxxxxxxxxxx&quot;);</span><br><span class="line">OkGo.getInstance().init(this)</span><br><span class="line">.addCommonHeaders(headers);</span><br></pre></td></tr></table></figure><p>代码里的token后面的内容使用申请的Token字符串进行替换。</p><p>然后，重点来了，修改文件内容需要以下操作，直接上代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import android.util.Base64;</span><br><span class="line"></span><br><span class="line">String json = &quot;&#123;\&quot;key1\&quot;: \&quot;value2\&quot;&#125;&quot;;</span><br><span class="line">String base64Data = Base64.encodeToString(json.getBytes(StandardCharsets.UTF_8), Base64.DEFAULT);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">* 上传数据格式：</span><br><span class="line">* &#123;</span><br><span class="line">*   &quot;message&quot;: &quot;test&quot;,</span><br><span class="line">*   &quot;content&quot;:</span><br><span class="line">*   &quot;Y3JlYXRlIxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,</span><br><span class="line">*   &quot;sha&quot;: &quot;5xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><br><span class="line">* &#125;</span><br><span class="line">*/</span><br><span class="line">JSONObject json = new JSONObject();</span><br><span class="line">json.put(&quot;message&quot;, &quot;test&quot;);</span><br><span class="line">json.put(&quot;content&quot;, base64Data);</span><br><span class="line">// shaStr，就是上面提到的文件哈希值。</span><br><span class="line">json.put(&quot;sha&quot;, shaStr);</span><br><span class="line"></span><br><span class="line">// 这个地址就是上面获取文件信息的地址，使用PUT方式进行文件更改</span><br><span class="line">OkGo.&lt;String&gt;put(&quot;https://api.github.com/repos/Staray/APITest/contents/data.json&quot;)</span><br><span class="line">    .upJson(json)</span><br><span class="line">    .execute(new StringCallback() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onSuccess(Response&lt;String&gt; response) &#123;</span><br><span class="line">            Log.e(&quot;TAG&quot;, &quot;success:&quot; + response.body());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>可以实际看到文件内容就被更改了:<br><img src="https://pic.staray.top/Github-API/put-result.png" alt="put-result"></p><p>再次访问Github API接口：</p><p><img src="https://pic.staray.top/Github-API/put-data-result.png" alt="put-data-result"></p><p>可以看到文件内容更改成功。</p><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>有了这个接口，我们就可以实现一些简单的数据存储，这里使用的明文，可以进行加密处理，这样我们就可以在没有个人服务器的情况下，使用远端数据存储和同步数据了。</p><hr><div height="200px"></div><center><font color="#32CD32">天街小雨润如酥，草色遥看近却无</font></center>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;在使用Github作为远端仓库的时候，Github给我们提供了一套API接口，可以做非常多有趣的事，今天尝试使用其中的API来操作仓库文件，</summary>
      
    
    
    
    <category term="技术文章" scheme="https://staray.github.io/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"/>
    
    
    <category term="Github" scheme="https://staray.github.io/tags/Github/"/>
    
    <category term="API" scheme="https://staray.github.io/tags/API/"/>
    
    <category term="Android" scheme="https://staray.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>字帖</title>
    <link href="https://staray.github.io/2023/04/17/zitie/"/>
    <id>https://staray.github.io/2023/04/17/zitie/</id>
    <published>2023-04-17T03:11:36.000Z</published>
    <updated>2023-04-18T01:51:04.115Z</updated>
    
    <content type="html"><![CDATA[<p>试试字帖：</p><style>    .inline-demo {        border: 1px solid #CCC;        width: 300px;        height: 300px;        margin: 5px;    }    .container {        text-align: center;    }    .h-center-item {        display: inline-block;    }</style><script type="text/javascript" src="hanzi-writer.js"></script><script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script><div class="container">    <div class="h-center-item">        <!--米字格-->        <div class="inline-demo">            <svg xmlns="http://www.w3.org/2000/svg" width="300" height="300" id="grid-background-target">                <line x1="0" y1="0" x2="300" y2="300" stroke="#DDD" ></line>                <line x1="300" y1="0" x2="0" y2="300" stroke="#DDD" ></line>                <line x1="150" y1="0" x2="150" y2="300" stroke="#DDD" ></line>                <line x1="0" y1="150" x2="300" y2="150" stroke="#DDD" ></line>            </svg>            <input id="input_edit" style="margin-top: 10px;" value="为"/>            <button id="animate-button">生成</button>        </div>    </div></div><script>    var text = document.getElementById("input_edit").value;    var writer = HanziWriter.create('grid-background-target', text, {        width: 300,        height: 300,        padding: 5,        showOutline: true,        strokeAnimationSpeed: 0.8, // 5x normal speed        delayBetweenStrokes: 1000, // milliseconds        radicalColor: '#337ab7', // blue        charDataLoader: function (char, onComplete) {            $.getJSON("./data/" + char + ".json", function (charData) {                onComplete(charData);            })        }    });    document.getElementById('animate-button').addEventListener('click', function () {        var text = document.getElementById("input_edit").value;        writer.setCharacter(text);        writer.animateCharacter();    });</script>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;试试字帖：&lt;/p&gt;
&lt;style&gt;
    .inline-demo {
        border: 1px solid #CCC;
        width: 300px;
        height: 300px;
        margin: 5px;
  </summary>
      
    
    
    
    
    <category term="字帖" scheme="https://staray.github.io/tags/%E5%AD%97%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://staray.github.io/2023/04/12/hello-world/"/>
    <id>https://staray.github.io/2023/04/12/hello-world/</id>
    <published>2023-04-12T08:52:29.608Z</published>
    <updated>2023-04-12T08:49:38.234Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
